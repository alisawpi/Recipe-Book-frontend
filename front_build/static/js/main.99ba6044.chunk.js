(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{25:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},71:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(17),s=r.n(a),c=r(4),i=r.n(c),o=r(12),l=r(5),u=(r(25),r(1)),d=function(e){return void 0===e.error||void 0===e.text?null:e.error?Object(u.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.text,Object(u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}):Object(u.jsxs)("div",{className:"alert alert-primary alert-dismissible fade show",role:"alert",children:[e.text,Object(u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]})},b=r(13),j=r.n(b),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Login":return{user:t.payload};case"Logout":return{user:void 0};default:return e}},p=function(e){return{type:"Login",payload:e}},m=r(35),x=Object(m.a)(h),O="/api/users",f=function(){var e=Object(o.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("".concat(O,"/signup"),t);case 3:return r=e.sent,n=r.data,window.localStorage.setItem("token",n),x.dispatch(p(t)),e.abrupt("return",!0);case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0.response.data.error.includes("expected `username` to be unique")){e.next=16;break}return e.abrupt("return","Username already taken");case 16:return e.abrupt("return","Something went wrong, pleasy try again.");case 17:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("".concat(O,"/login"),t);case 3:return r=e.sent,console.log(r),n=r.data,window.localStorage.setItem("token",n),x.dispatch(p(t)),e.abrupt("return",!0);case 11:if(e.prev=11,e.t0=e.catch(0),console.log(e.t0.response),401!==e.t0.response.status){e.next=18;break}return e.abrupt("return","Incorrect username or password");case 18:return e.abrupt("return","Something went wrong please try again.");case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(""),c=Object(l.a)(s,2),b=c[0],j=c[1],h=Object(n.useState)(),p=Object(l.a)(h,2),m=p[0],x=p[1],O=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:r,password:b},e.next=4,g(n);case 4:a=e.sent,console.log(a),x(!0!==a?{error:!0,text:a}:{error:!1,text:"Logged in!"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"container-fluid",id:"login-form-container",children:[Object(u.jsx)(d,{error:null===m||void 0===m?void 0:m.error,text:null===m||void 0===m?void 0:m.text}),Object(u.jsxs)("form",{id:"login-form-column",onSubmit:O,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"login-username",className:"form-label",children:"Username"}),Object(u.jsx)("input",{type:"text",id:"login-username",className:"form-control",placeholder:"username",onChange:function(e){return a(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"login-password",className:"form-label",children:"Password"}),Object(u.jsx)("input",{type:"password",id:"login-password",placeholder:"password",className:"form-control",onChange:function(e){return j(e.target.value)}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-outline-warning",children:"Login"})]})]})},w="/api/recipes",N=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(w);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(w,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=(r(60),r(24)),k=r(10),L=(r(61),function(e){var t=e.recipe,r=Object(S.a)(Array(Math.round(t.rating)).keys()),n=Object(S.a)(Array(5-Math.round(t.rating)).keys());return Object(u.jsxs)(k.b,{className:"card me-2",to:"/recipes/".concat(t._id),children:[Object(u.jsx)("img",{className:"recipe-thumbnail",src:"https://images.pexels.com/photos/704569/pexels-photo-704569.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",alt:"Image of recipe.title}"}),Object(u.jsx)("h5",{className:"card-title",children:t.title}),Object(u.jsxs)("div",{className:"card-details",children:[Object(u.jsxs)("div",{className:"card-cook-time",children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clock",viewBox:"0 0 16 16",children:[Object(u.jsx)("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),Object(u.jsx)("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"})]}),t.time,"min"]}),Object(u.jsxs)("div",{className:"card-recipe-rating",children:[r.map((function(e){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star-fill",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"})},e)})),n.map((function(e){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"})},e)}))]})]})]})}),C=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(),c=Object(l.a)(s,2),i=c[0],o=c[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),j=b[0],h=b[1],p=Object(n.useState)(!1),m=Object(l.a)(p,2),x=(m[0],m[1]);if(Object(n.useEffect)((function(){N().then((function(e){a(e),o(e)})).catch((function(){return x(!0)}))}),[]),!r||!i)return Object(u.jsx)("div",{children:"Loading"});return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{className:"call-to-action",children:"Find your new favorite recipe!"}),Object(u.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),j){console.log("here");var t=r.filter((function(e){return e.title.toLowerCase().includes(j)||e.ingredients.map((function(e){return e.toLowerCase()})).includes(j)}));o(t)}else o(r)},children:[Object(u.jsx)("input",{className:"search form-control",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){h(e.target.value.toLowerCase()),e.target.value.length<1&&o(r)}}),Object(u.jsx)("input",{type:"submit","aria-label":"Search",hidden:!0})]}),Object(u.jsxs)("button",{className:"search btn btn-outline-success","aria-label":"Search",children:["Filters",Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sliders mx-2",viewBox:"0 0 16 16",children:Object(u.jsx)("path",{fillRule:"evenodd",d:"M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"})})]})]}),Object(u.jsx)("h5",{className:"call-to-action",children:"Here's what's trending right now"}),Object(u.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.jsx)("div",{className:"d-flex justify-content-center recipe-list",style:{maxWidth:"80%"},children:i.length>0?i.map((function(e){return Object(u.jsx)(L,{recipe:e},e._id)})):Object(u.jsx)("p",{children:"Nothing found with your search, please try something else :("})})})]})},z=r(3),M=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(!1),c=Object(l.a)(s,2),i=(c[0],c[1]),o=Object(z.f)().id;return console.log(o),console.log(r),Object(n.useEffect)((function(){y(o).then((function(e){return a(e)})).catch((function(){return i(!0)}))}),[]),r?(console.log(r.ingredients),Object(u.jsxs)("div",{className:"recipe-card container",children:[Object(u.jsxs)("h1",{children:[" ",r.title," "]}),Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"recipe-thumbnail",src:"https://images.pexels.com/photos/704569/pexels-photo-704569.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",alt:"Image of recipe.title}"})}),Object(u.jsx)("div",{children:r.ingredients.map((function(e){return Object(u.jsx)("li",{children:e},e)}))}),Object(u.jsxs)("p",{children:[" ",r.directions," "]}),Object(u.jsxs)("p",{children:[" ",r.creator," "]})]})):Object(u.jsx)("div",{children:"Loading..."})},H=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(""),c=Object(l.a)(s,2),b=c[0],j=c[1],h=Object(n.useState)(""),p=Object(l.a)(h,2),m=p[0],x=p[1],O=Object(n.useState)(),g=Object(l.a)(O,2),v=g[0],w=g[1],N=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b&&r&&m||w({error:!0,text:"Please fill out all of the fields"}),b==m){e.next=5;break}return w({error:!0,text:"The passwords did not match, please try again"}),e.abrupt("return");case 5:return n={username:r,password:b},e.next=8,f(n);case 8:a=e.sent,w(!0!==a?{error:!0,text:a}:{error:!1,text:"Signed up successfully!"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"container-fluid",id:"signup-form-container",children:[Object(u.jsx)(d,{error:null===v||void 0===v?void 0:v.error,text:null===v||void 0===v?void 0:v.text}),Object(u.jsxs)("form",{id:"signup-form-column",onSubmit:N,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"signup-username",className:"form-label",children:"Username"}),Object(u.jsx)("input",{type:"text",id:"signup-username",className:"form-control",placeholder:"username",onChange:function(e){return a(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"signup-password",className:"form-label",children:"Password"}),Object(u.jsx)("input",{type:"password",id:"signup-password",placeholder:"password",className:"form-control",onChange:function(e){return j(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"signup-password-repeat",className:"form-label",children:"Repeat password"}),Object(u.jsx)("input",{type:"password",id:"signup-password-repeat",placeholder:"password",className:"form-control",onChange:function(e){return x(e.target.value)}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-outline-warning",children:"Signup"})]})]})},F=r(19),I=function(){var e=Object(F.b)((function(e){return e.user}));return console.log(e),Object(u.jsxs)(k.a,{children:[e?Object(u.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(u.jsxs)("div",{className:"container-fluid justify-content-end",children:[Object(u.jsx)("button",{className:"btn btn-outline-light me-2",onClick:function(){return window.localStorage.removeItem("token"),void x.dispatch({type:"Logout"})},children:"Logout"}),Object(u.jsxs)(k.b,{to:"/",children:["  ",Object(u.jsx)("button",{className:"btn btn-outline-light me-2",children:"Discover"})]}),Object(u.jsxs)(k.b,{to:"/create",children:["  ",Object(u.jsx)("button",{className:"btn btn-outline-light me-2",children:"Create"})]}),Object(u.jsxs)(k.b,{to:"/saved",children:["  ",Object(u.jsx)("button",{className:"btn btn-outline-light me-2",children:"Saved"})]})]})}):Object(u.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(u.jsxs)("div",{className:"container-fluid justify-content-end",children:[Object(u.jsxs)(k.b,{to:"/",children:["  ",Object(u.jsx)("button",{className:"btn btn-outline-light me-2",children:"Discover"})]}),Object(u.jsxs)(k.b,{to:"/login",children:["  ",Object(u.jsx)("button",{className:"btn btn-outline-light me-2",children:"Login"})]}),Object(u.jsxs)(k.b,{to:"/signup",children:["  ",Object(u.jsx)("button",{className:"btn btn-outline-light me-2",children:"Signup"})]})]})}),Object(u.jsxs)(z.c,{children:[Object(u.jsx)(z.a,{path:"/login",children:Object(u.jsx)(v,{})}),Object(u.jsx)(z.a,{path:"/signup",children:Object(u.jsx)(H,{})}),Object(u.jsx)(z.a,{path:"/recipes/:id",children:Object(u.jsx)(M,{})}),Object(u.jsx)(z.a,{path:"/",children:Object(u.jsx)(C,{})})]})]})};s.a.render(Object(u.jsx)(F.a,{store:x,children:Object(u.jsx)(I,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.99ba6044.chunk.js.map